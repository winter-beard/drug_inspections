<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FDA Drug Inspections</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        /* Adjust the size of the SVG to fit the container */
        svg {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="chart"></div>
    <script>
        // Sample data for the initial circles (sum of values and three-letter country codes)
        const initialData = [
            { value: 1144, country: 'USA', color: 'blue' },
            { value: 1018, country: 'India', color: 'orange' },
            { value: 326, country: 'China', color: 'red' },
            { value: 154, country: 'Italy', color: 'grey' },
            { value: 146, country: 'Germany', color: 'black' },
            { value: 116, country: 'Canada', color: 'green' },
            { value: 92, country: 'Spain', color: 'yellow' },
            { value: 64, country: 'France', color: 'purple' },
            { value: 54, country: 'UK', color: 'pink' },
            { value: 48, country: 'Taiwan', color: 'aquamarine' },
            { value: 41, country: 'Switzerland', color: 'lime' },
            { value: 33, country: 'Israel', color: 'navy' },
            { value: 32, country: 'Japan', color: 'olive' },
            { value: 29, country: 'Ireland', color: 'teal' },
            { value: 25, country: 'Austria', color: 'steelblue' },
            { value: 19, country: 'Czech Republic', color: 'maroon' },
            { value: 19, country: 'Netherlands', color: '#f5c242' },
            { value: 19, country: 'Mexico', color: '#f56c42' },
            { value: 19, country: 'Hungary', color: '#5742f5' },
            { value: 19, country: 'Romania', color: 'brown' },
            { value: 17, country: 'Slovenia', color: 'salmon' },
            { value: 16, country: 'Bangladesh', color: 'orangered' },
            { value: 14, country: 'Denmark', color: '#FFEFD5' },
            { value: 13, country: 'Brazil', color: 'Khaki' },
            { value: 13, country: 'South Africa', color: 'Magenta' },
            { value: 13, country: 'Norway', color: 'Thistle' },
            { value: 11, country: 'Argentina', color: 'SpringGreen' },
            { value: 11, country: 'Malaysia', color: 'LightCyan' },
            { value: 11, country: 'Jordan', color: 'DodgerBlue' },
            { value: 11, country: 'Australia', color: 'RosyBrown' },
            { value: 10, country: 'Malta', color: 'Chocolate' },
            { value: 10, country: 'Belgium', color: 'MistyRose' },
            { value: 9, country: 'Finland', color: 'Gainsboro' },
            { value: 8, country: 'Portugal', color: 'Silver' },
            { value: 8, country: 'South Korea', color: 'DarkKhaki' },
            { value: 7, country: 'Greece', color: 'DarkSlateGray' },
            { value: 7, country: 'Turkey', color: 'HoneyDew' },
            { value: 7, country: 'Croatia', color: 'Turquoise' },
            { value: 6, country: 'Sweden', color: 'RebeccaPurple' },
            { value: 6, country: 'New Zealand', color: 'FireBrick' },
            { value: 4, country: 'Poland', color: 'PaleVioletRed' },
            { value: 3, country: 'Colombia', color: 'Coral' },
            { value: 3, country: 'Latvia', color: 'LightGoldenrodYellow' },
            { value: 3, country: 'Bulgaria', color: 'Moccasin' },
            { value: 3, country: 'Singapore', color: 'BlueViolet' },
            { value: 3, country: 'Saudi Arabia', color: 'Orchid' },
            { value: 2, country: 'Macao', color: 'DarkGreen' },
            { value: 2, country: 'United Arab Emirates', color: 'DarkSeaGreen' },
            { value: 2, country: 'Thailand', color: 'PowderBlue' },
            { value: 2, country: 'Slovakia', color: 'MidnightBlue' },
            { value: 1, country: 'Moldova', color: 'Azure' },
            { value: 1, country: 'Hong Kong', color: 'WhiteSmoke' },
            { value: 1, country: 'Dominican Republic', color: 'Linen' },
        ];

        // updated circles to represent individual facilities
        const facilities = [
          { value: 714, country: 'USA', color: 'blue' },
            { value: 568, country: 'India', color: 'orange' },
            { value: 202, country: 'China', color: 'red' },
            { value: 97, country: 'Italy', color: 'grey' },
            { value: 94, country: 'Germany', color: 'black' },
            { value: 68, country: 'Canada', color: 'green' },
            { value: 65, country: 'Spain', color: 'yellow' },
            { value: 41, country: 'France', color: 'purple' },
            { value: 32, country: 'UK', color: 'pink' },
            { value: 29, country: 'Taiwan', color: 'aquamarine' },
            { value: 29, country: 'Switzerland', color: 'lime' },
            { value: 25, country: 'Israel', color: 'navy' },
            { value: 17, country: 'Japan', color: 'olive' },
            { value: 16, country: 'Ireland', color: 'teal' },
            { value: 16, country: 'Austria', color: 'steelblue' },
            { value: 13, country: 'Czech Republic', color: 'maroon' },
            { value: 11, country: 'Netherlands', color: '#f5c242' },
            { value: 10, country: 'Mexico', color: '#f56c42' },
            { value: 10, country: 'Hungary', color: '#5742f5' },
            { value: 9, country: 'Romania', color: 'brown' },
            { value: 9, country: 'Slovenia', color: 'salmon' },
            { value: 7, country: 'Bangladesh', color: 'orangered' },
            { value: 7, country: 'Denmark', color: '#FFEFD5' },
            { value: 7, country: 'Brazil', color: 'Khaki' },
            { value: 7, country: 'South Africa', color: 'Magenta' },
            { value: 7, country: 'Norway', color: 'Thistle' },
            { value: 6, country: 'Argentina', color: 'SpringGreen' },
            { value: 6, country: 'Malaysia', color: 'LightCyan' },
            { value: 6, country: 'Jordan', color: 'DodgerBlue' },
            { value: 6, country: 'Australia', color: 'RosyBrown' },
            { value: 5, country: 'Malta', color: 'Chocolate' },
            { value: 5, country: 'Belgium', color: 'MistyRose' },
            { value: 5, country: 'Finland', color: 'Gainsboro' },
            { value: 5, country: 'Portugal', color: 'Silver' },
            { value: 5, country: 'South Korea', color: 'DarkKhaki' },
            { value: 5, country: 'Greece', color: 'DarkSlateGray' },
            { value: 4, country: 'Turkey', color: 'HoneyDew' },
            { value: 4, country: 'Croatia', color: 'Turquoise' },
            { value: 4, country: 'Sweden', color: 'RebeccaPurple' },
            { value: 2, country: 'New Zealand', color: 'FireBrick' },
            { value: 2, country: 'Poland', color: 'PaleVioletRed' },
            { value: 2, country: 'Colombia', color: 'Coral' },
            { value: 2, country: 'Latvia', color: 'LightGoldenrodYellow' },
            { value: 1, country: 'Bulgaria', color: 'Moccasin' },
            { value: 1, country: 'Singapore', color: 'BlueViolet' },
            { value: 1, country: 'Saudi Arabia', color: 'Orchid' },
            { value: 1, country: 'Macao', color: 'DarkGreen' },
            { value: 1, country: 'United Arab Emirates', color: 'DarkSeaGreen' },
            { value: 1, country: 'Thailand', color: 'PowderBlue' },
            { value: 1, country: 'Slovakia', color: 'MidnightBlue' },
            { value: 1, country: 'Moldova', color: 'Azure' },
            { value: 1, country: 'Hong Kong', color: 'WhiteSmoke' },
            { value: 1, country: 'Dominican Republic', color: 'Linen' },
            // Add more data points here
        ];

        // Function to draw the circles based on the data
        function drawCircles(data) {
            const svg = d3.select('#chart svg');

            // Update the circles
            const circles = svg.selectAll('circle')
                .data(data, d => d.country);

            // Enter new circles
            circles.enter()
                .append('circle')
                .attr('cx', 400) // Adjust the center X-coordinate as needed
                .attr('cy', 300) // Adjust the center Y-coordinate as needed
                .attr('r', d => Math.sqrt(d.value) * 5) // Scale the radius based on the value
                .attr('fill', d => d.color)
                .merge(circles) // Merge enter and update selections
                .transition()
                .duration(1000) // Animation duration in milliseconds
                .attr('r', d => Math.sqrt(d.value) * 5);

            // Remove any circles that are not in the updated data
            circles.exit().remove();
        }

        // Initial drawing of circles
        drawCircles(initialData);

        // Button to trigger the animation
        d3.select('#chart')
            .append('button')
            .text('Animate')
            .on('click', function() {
                // Animate the updated circles
                drawCircles(updatedData);
            });

    </script>
</body>
</html>
